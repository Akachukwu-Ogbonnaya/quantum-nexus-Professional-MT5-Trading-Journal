<!DOCTYPE html>
<html>
<head>
    <title>License Manager</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #ddd; }
        th { background-color: #f2f2f2; }
        .status-active { color: green; }
        .status-inactive { color: red; }
    </style>
</head>
<body>
    <h1>License Manager</h1>
    <p><a href="/admin/dashboard">‚Üê Back to Dashboard</a></p>
    
    <table>
        <thead>
            <tr>
                <th>License Key</th>
                <th>Product Type</th>
                <th>Customer Email</th>
                <th>Created</th>
                <th>Expires</th>
                <th>Status</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for license in licenses %}
            <tr>
                <td>{{ license.license_key }}</td>
                <td>{{ license.product_type }}</td>
                <td>{{ license.customer_email }}</td>
                <td>{{ license.created_at.strftime('%Y-%m-%d') }}</td>
                <td>{{ license.expires_at.strftime('%Y-%m-%d') }}</td>
                <td class="status-{{ 'active' if license.is_active else 'inactive' }}">
                    {{ 'Active' if license.is_active else 'Inactive' }}
                </td>
                <td>
                    {% if license.is_active %}
                    <button onclick="deactivateLicense('{{ license.license_key }}')">Deactivate</button>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    
    <script>
        async function deactivateLicense(licenseKey) {
            if (confirm('Are you sure you want to deactivate this license?')) {
                const response = await fetch(`/admin/licenses/${licenseKey}/deactivate`, {
                    method: 'POST'
                });
                
                if (response.ok) {
                    location.reload();
                }
            }
        }
    </script>
</body>
</html>