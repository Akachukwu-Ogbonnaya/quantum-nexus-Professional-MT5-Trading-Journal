<!DOCTYPE html>
<html>
<head>
    <title>License Server - Admin Dashboard</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        .stats { display: flex; gap: 20px; margin-bottom: 30px; }
        .stat-card { background: #f5f5f5; padding: 20px; border-radius: 8px; min-width: 150px; }
        .stat-number { font-size: 24px; font-weight: bold; }
        .create-license { background: #e8f5e8; padding: 20px; border-radius: 8px; }
        input, select { padding: 8px; margin: 5px; }
        button { background: #007cba; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>License Server Admin Dashboard</h1>
    
    <div class="stats">
        <div class="stat-card">
            <div class="stat-number">{{ total_licenses }}</div>
            <div>Total Licenses</div>
        </div>
        <div class="stat-card">
            <div class="stat-number">{{ active_licenses }}</div>
            <div>Active Licenses</div>
        </div>
        <div class="stat-card">
            <div class="stat-number">{{ total_activations }}</div>
            <div>Total Activations</div>
        </div>
    </div>
    
    <div class="create-license">
        <h3>Create New License</h3>
        <input type="email" id="customer_email" placeholder="Customer Email" required>
        <select id="product_type">
            <option value="basic">Basic ($49)</option>
            <option value="premium" selected>Premium ($99)</option>
            <option value="professional">Professional ($199)</option>
        </select>
        <button onclick="createLicense()">Create License</button>
        <div id="result" style="margin-top: 10px;"></div>
    </div>
    
    <p><a href="/admin/licenses">Manage Licenses</a></p>
    
    <script>
        async function createLicense() {
            const email = document.getElementById('customer_email').value;
            const product = document.getElementById('product_type').value;
            
            const response = await fetch('/admin/licenses/create', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({
                    customer_email: email,
                    product_type: product
                })
            });
            
            const result = await response.json();
            const resultDiv = document.getElementById('result');
            
            if (result.success) {
                resultDiv.innerHTML = `<strong>License Created:</strong> ${result.license_key}`;
                document.getElementById('customer_email').value = '';
            } else {
                resultDiv.innerHTML = `<strong>Error:</strong> ${result.error}`;
            }
        }
    </script>
</body>
</html>